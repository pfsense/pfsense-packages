<?php
$balancer_config= <<<EOF
##################################################################################
# NOTE: This file was generated by the pfSense package management system.        #
#       Please do not edit this file by hand!   If you need to add functionality #
#       then edit /usr/local/pkg/apache_* files.                                 #
#                                                                                #
#       And don't forget to submit your changes to:                              #
#       https://github.com/pfsense/pfsense-packages   	                         #
##################################################################################
SetOutputFilter DEFLATE
SetInputFilter DEFLATE

SetEnvIfNoCase Request_URI .(?:gif|jpe?g|png)$ no-gzip dont-vary
SetEnvIfNoCase Request_URI .(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
SetEnvIfNoCase Request_URI .pdf$ no-gzip dont-vary

AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/js text/javascript

DeflateCompressionLevel 9

ProxyVia On
ProxyRequests Off
ProxyTimeout 600

<Proxy *>
 Order Deny,Allow
 Allow from all
</Proxy>

<ProxyMatch \.(?i:cmd|exe|bat|com|vb?|ida|printer|htr|iso)$>
  Order allow,deny
  deny from all
</ProxyMatch>

Header add Set-Cookie "ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/" env=BALANCER_ROUTE_CHANGED


EOF;
?>
